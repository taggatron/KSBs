<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Coaching KSB Self-Assessment</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Simple inline SVG favicon (badge) -->
  <link rel="icon" href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><circle cx='12' cy='12' r='10' fill='%231f6feb'/><circle cx='12' cy='9.4' r='1.3' fill='%23ffffff'/></svg>">
</head>
<body>
  <header>
    <h1 class="site-title">
      <!-- badge + laurel icon representing achievement/coach -->
      <svg class="site-icon" width="40" height="40" viewBox="0 0 24 24" role="img" aria-labelledby="siteIconTitle" tabindex="0" xmlns="http://www.w3.org/2000/svg">
        <title id="siteIconTitle">Coaching badge — achievement & development</title>
        <desc>Badge with laurel leaves and a small coach silhouette</desc>
        <defs>
          <linearGradient id="g1" x1="0" x2="1">
            <stop offset="0%" stop-color="#1f6feb" />
            <stop offset="100%" stop-color="#2db4ff" />
          </linearGradient>
        </defs>
        <g fill="none" fill-rule="evenodd">
          <circle cx="12" cy="12" r="10" fill="url(#g1)" />
          <path d="M7.5 8c-.8.8-1.5 2-1.5 4 .8-.3 1.6-.7 2.2-1.4C8.7 10 8.2 9.1 7.5 8z" fill="#ffffff" opacity="0.95"/>
          <path d="M6.2 10.6c.9-.7 1.9-1.2 2.9-1.6-.1.6-.2 1.4-.5 2-1 .2-1.8.5-2.4.9.0-.5.0-.9 0-1.3z" fill="#ffffff" opacity="0.85"/>
          <path d="M16.5 8c.8.8 1.5 2 1.5 4-.8-.3-1.6-.7-2.2-1.4.1-1 .6-1.9 1-2.6z" fill="#ffffff" opacity="0.95"/>
          <path d="M17.8 10.6c-.9-.7-1.9-1.2-2.9-1.6.1.6.2 1.4.5 2 1 .2 1.8.5 2.4.9 0-.5 0-.9 0-1.3z" fill="#ffffff" opacity="0.85"/>
          <circle cx="12" cy="9.4" r="1.3" fill="#fff" />
          <path d="M9.8 13.4c.6-.9 1.8-1.4 2.9-1.4 1.2 0 2.4.6 3 1.6-.9.6-2.4 1-4 1-1.6 0-3.1-.4-4-1z" fill="#fff" opacity="0.98"/>
        </g>
      </svg>
      Coaching Knowledge, Skills & Behaviours — Self Assessment
    </h1>
    <p class="subtitle">Rate yourself 1 (needs development) to 5 (highly confident). Save, load, export, and generate a development plan.</p>
  </header>

  <main>
    <section id="controls">
      <button id="saveBtn">Save progress</button>
      <button id="loadBtn">Load progress</button>
      <button id="clearBtn">Clear answers</button>
      <button id="exportCsvBtn">Export CSV</button>
      <button id="importBtn">Import CSV/JSON</button>
  <input id="importFileInput" type="file" accept=".csv,application/json,text/csv,application/octet-stream" aria-label="Import file input (hidden)">
      <button id="summaryBtn">Show summary & plan</button>
    </section>

    <div id="workspace">
      <aside id="canvasWrap">
        <canvas id="sceneCanvas"></canvas>
        <div class="canvas-caption">3D coach model — KSB shapes surround the coach. Click a shape to jump to its item.</div>
      </aside>

      <section id="assessment"></section>
    </div>

    <section id="summary" class="hidden">
      <h2>Summary</h2>
      <div id="summaryContent"></div>
    </section>
  </main>

  <footer>
    <small>Local app — data stored in your browser only. Designed for quick self-reflection and development planning.</small>
  </footer>

  <script src="data.js"></script>
    <!-- Import map to resolve bare 'three' specifier used by examples/jsm modules in the browser -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.152.2/build/three.module.js"
        }
      }
    </script>

    <!-- Load Three and GLTFLoader as ES modules, then expose them on window.THREE for legacy code -->
    <script type="module">
      import * as THREE from 'three';
      import { GLTFLoader } from 'https://unpkg.com/three@0.152.2/examples/jsm/loaders/GLTFLoader.js';
      // Expose a global THREE so non-module scripts (three-scene.js) can use it.
      window.THREE = THREE;
      // Attach the GLTFLoader constructor to window.GLTFLoader so legacy code can access it
      // (THREE namespace objects are not always extensible in some browsers/runtime builds)
      window.GLTFLoader = GLTFLoader;
    </script>
  <script src="three-scene.js" defer></script>
  <script src="app.js" defer></script>
  <script>
    // Update --percent CSS variable for WebKit gradient fill so the track reflects slider value
    (function(){
      function updateRangePercent(el){
        const val = Number(el.value);
        const min = Number(el.min || 0);
        const max = Number(el.max || 100);
        const pct = Math.round(((val - min) / (max - min)) * 100);
        el.style.setProperty('--percent', pct + '%');
      }
      function init(){
        document.querySelectorAll('.rating input[type="range"]').forEach(el => {
          updateRangePercent(el);
          el.addEventListener('input', ()=> updateRangePercent(el));
        });
      }
      if(document.readyState === 'loading') document.addEventListener('DOMContentLoaded', init); else init();
    })();
  </script>
</body>
</html>
